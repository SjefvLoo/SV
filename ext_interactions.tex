\section{External Interactions}
Interactions describe in what manner the system behavior is controlled by the controller.
External actions specifically describe the communication between external parts of the system and the controller.
In this chapter the interactions of the controller, which consists of x sub controllers, with the external environment will be described. in order to proparly define the external interactions we specify a few variables:
\\Let $P$ be the set of positions at which chucks are located; $P = \{chuckMeas, chuckOut, chuckEmpty_1, chuckEmpty_2\}$.
\\Let $R$ be the set of robots; $R = \{R_1,R_2,R_3\}$.\todo{define x}

\subsection{Observational variables}
In order to better specify the external interactions a number of observational variables are declared:
\begin{itemize}
\item Let $c(pos)$ denote the type of wafer that is on the chuck at position $pos$ where $pos \in P$. Possible values are: $none, closing, nonclosing$.
\end{itemize}
\subsection{Lot Controller to Machine}
\begin{itemize}
\item $RMoveFromTo(r, p_1, p-2)$
\\Request robot $r$ to move the wafer that is located at position $p_1$ to position $p_2$. For these movements there is a set of legal argument combinations that are accepted, all other argument combinations are not accepted. Accepted argument combinations: 
\begin{align*}
\{ & (R_1, Tray, chuckIn),&\\
& (R_1, chuckOut, Tray),&\\
&(R_2, chuckIn, Meas),&\\
&(R_2, Meas, chuckEmpty_1),&\\
&(R_2, chuckEmpty_1, Meas),&\\
&(R_3, chuckEmpty_2, Meas),&\\
&(R_3, Meas, chuckEmpty_2),&\\
&(R_3, Meas, chuckOut)\}
\end{align*}
$RMoveFromTo$ has the following effect on the observational variables: 
\begin{align*}
&\textbf{Pre}&&\textbf{Post}&\textbf{Conditions}&\\
&RMoveFromTo(R_1, Tray, chuckIn)&\rightarrow&c(chuckIn) = nonclosing&&\\
&RMoveFromTo(R_1, chuckOut, Tray)&\rightarrow&c(chuckOut) = none&&\\
&RMoveFromTo(r, p_1, p_2), s = c(p_1)&\rightarrow&c(p_2) = s&\text{for any }r \in R\text{ and }p_1,p_2 \in P&\\
&&&c(p_1)=none&&
\end{align*}
\item $Calibrate$
\\Request calibration to be performed.
\item $PreMeasureWafer$
\\Request pre-measurement to be performed on the wafer at $chuckIn$.
\item $MeasureWafer$
\\Request measurement to be performed on the wafer at $Meas$ position.
\item $ProjectWafer$
\\Request an image projection of the wafer at the $Proj$ position.
\item $Swap$
\\Request a swap of the chucks present on the $Meas$ and $Proj$ position.
$Swap$ has the following effect on the observational variables:
\begin{align*}
&\textbf{Pre}&&\textbf{Post}&\textbf{Conditions}&\\
&Swap, m = c(Meas), p = c(Proj)&\rightarrow&c(Proj) = m&&\\
&&&c(Meas) = p&&
\end{align*}
\end{itemize}

\subsection{Machine to Lot Controller}
\todo{copy from gdocs}

\subsection{Lot Controller to User}
\todo{copy from gdocs}

\subsection{User to Lot Controller}
\todo{copy from gdocs}
