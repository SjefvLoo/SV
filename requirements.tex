\section{Requirements}
In order to control the machine a lot controller is required.
The lot controller controls the machine in such a way that all wafers in a tray are projected in the correct manner.
The lot controller can send commands to the machine to perform certain tasks and the machine will report back with information about its status.
The machine also sends information about the lots in the tray as well as information about calibration to the machine. 

The requirements for the lot controller are as follows:
\begin{enumerate}
    \item The system will halt.
    \item When the system halts:
        \begin{enumerate}
            \item \tray contains lots with projected wafers. (i.e. The same amount of lots and wafers as initially.)
            \item \chuckMeas and \chuckProj both contain a closing wafer.
            \item \chuckIn and \chuckOut contain no wafer.
        \end{enumerate}
    \item The pre-measurement, measurement, image projection, calibration, robot and swap components will only receive a command when that component is idle.
    \item \robotOne, \robotTwo and \robotThree will only receive a command to move a wafer from the source chuck to the destination chuck if the source chuck contains a wafer and the destination chuck does not contain a wafer.\todo{Maybe reformulate.}
    \item Wafers at chuck \chuckIn are pre-measured before they are moved to chuck \chuckMeas.
    \item Wafers that are being projected have been measured at \chuckMeas and have not changed chucks since.
    \item \chuckMeas and \chuckProj will not be swapped when a measurement, projection or calibration is taking place.
    \item \chuckMeas and \chuckProj will only swap if both contain a wafer.
    \item A wafer from a lot is only projected if the chuck it is contained on is in the recipe for its corresponding lot.
    \item Measurement only takes place when a non-closing wafer is at \chuckMeas.
    \item Projection only takes place when a non-closing wafer is at \chuckProj.
    \item Closing wafers are not moved to \chuckOut or \tray.
    \item If a lot requires calibration: no wafer of this lot will be moved to \chuckMeas before calibration has finished.\todo{Maybe reformulate.}
    \item Calibration only starts if \chuckMeas and \chuckProj contain closing wafers.
    \item Wafers are only moved to chuck \chuckOut when they are projected.
\end{enumerate}